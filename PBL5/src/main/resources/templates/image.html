<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Lịch sử chụp ảnh</title>
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!--    <link href="../static/bootstrap-5.0.2-dist/css/bootstrap.min.css" rel="stylesheet">-->
    <!--    <script src="../static/bootstrap-5.0.2-dist/js/bootstrap.bundle.min.js"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous">
    </script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>
    <!--    <script th:src="@{/js/imagetodata.js}"></script>-->
    <!--    <script src="../static/js/imagetodata.js"></script>-->
</head>
<body>
<div class="row">
    <div class="col-1"></div>
    <div class="col-10">
        <h1>Lịch sử chụp ảnh</h1>
        <table class="table table-striped">
            <tr>
                <th class="text-center">STT</th>
                <th class="text-center">Ảnh</th>
                <th class="text-center">Thời gian chụp</th>
                <th class="text-center">Số lượng</th>
                <th class="text-center">Lựa chọn</th>
            </tr>
            <th:block th:each="history, row: ${historyList}">
                <tr>
                    <td th:text="${row.count}" class="text-center"></td>
                    <td class="text-center">
                        <img th:src="'data:image/png;base64,' + ${history.getImage()}" alt="Cover" height="80"
                             width="200">
                    </td>
                    <td th:text="${history.getTime()}" class="text-center"></td>
                    <td th:text="${history.getAmount()}" class="text-center"></td>
                    <td class="text-center">
                        <button type="button" class="btn btn-danger" data-bs-toggle="modal"
                                data-bs-target="#deleteModal"
                                th:attr="onclick=|deleteItem('${history.getId()}')|">Xoá
                        </button>
                        <label>
                            <input name="idDelete" class="form-check-input" type="checkbox"
                                   th:value="${history.getId()}">
                        </label>
                    </td>
                </tr>
                <tr th:if="${historyList.isEmpty()}">
                    <td colspan="5" class="text-center">Danh sách trống.</td>
                </tr>
            </th:block>
        </table>
        <nav>
            <ul class="pagination justify-content-center">
                <li th:class="${currentPage == 1} ? 'page-item disabled' : 'page-item'">
                    <a class="page-link" th:href="@{/image/list?page=1}">Đầu</a>
                </li>
                <li th:class="${currentPage == 1} ? 'page-item disabled' : 'page-item'">
                    <a class="page-link" th:href="@{/image/list(page=${currentPage - 1})}">Trước</a>
                </li>
                <li th:each="pageNumber : ${#numbers.sequence(1, totalPages)}"
                    th:class="${currentPage == pageNumber} ? 'page-item active' : 'page-item'">
                    <a class="page-link" th:href="@{/image/list(page=${pageNumber})}" th:text="${pageNumber}"></a>
                </li>
                <li th:class="${currentPage == totalPages} ? 'page-item disabled' : 'page-item'">
                    <a class="page-link" th:href="@{/image/list(page=${currentPage + 1})}">Sau</a>
                </li>
                <li th:class="${currentPage == totalPages} ? 'page-item disabled' : 'page-item'">
                    <a class="page-link" th:href="@{/image/list(page=${totalPages})}">Cuối</a>
                </li>
            </ul>
        </nav>
    </div>
</div>
</body>
</html>